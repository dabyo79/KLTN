<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<canvas id="chart"></canvas>
<script>
fetch("/admin/api/stats_json").then(r => r.json()).then(data => {
  const byDay = {};
  data.forEach(x => {
    const d = x.created_at.split("T")[0];
    byDay[d] = (byDay[d] || 0) + 1;
  });
  const labels = Object.keys(byDay);
  const values = Object.values(byDay);
  new Chart(document.getElementById("chart"), {
    type: "bar",
    data: { labels, datasets: [{ label: "Lượt tìm kiếm", data: values }] }
  });
});
</script>
